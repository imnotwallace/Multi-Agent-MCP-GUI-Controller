I want you to review and rewrite this code so that the following design is acheived:
1.	The MCP Allow List isn’t a global variable, but it’s a file stored in the same folder with the server.
2.	It is an MCP server with a json that can be added to Claude Code.
3.	When the server launches, the server checks for the multi-agent_mcp_context_manager.db, and if it doesn’t exist, it builds it.  This is the same db that the main.py creates.
4.	Whenever there is an unknown connection for the first time, a new db entry shall be created and the connection id of the unknown connection shall be recorded in the database.  This is a registration request with the server.
5.	The user can assign an agent entity to that unknown connection. It is a 1-to-1 relationship.  The user shall be able to change the assignment of the agent to that unknown connection as needed.  The user shall also be able to bulk unassign agents from multiple connections at once.
6.	The GUI shall also include clear instructions to the user on the data format / json that the server is expecting in order for the server to respond to the connection.
7.	The GUI shall include an ability to configure for each agent_id the read level assigned to it:  
    a.	Self – Self means the agent can read all contexts in the session the agent_id is in but only the contexts belonging to that agent_id.
    b.	Team – Team means the agent can read all contexts in the session the agent_id is in where it matches the same team_id as the agent_id.
    c.	All – All means the agent can read all contexts in the session the agent_id is in.
8.	The server shall allow the connection to run the following processes:
    a.	ReadDB (agent_id)
        i.	When this process is run, the server first checks what is the current session.
        ii.	The server then checks the agent_id in the argument.
        iii.	The server then returns all of the context data in accordance with the agent_id’s read permission level. 
    b.	WriteDB (agent_id, /context)
        i.	When this process is run, a new context row is written against the agent_id in that same session_id, and the “/context” passed by the connection shall be written in the “context” column of that new db row.
